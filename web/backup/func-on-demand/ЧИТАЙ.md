# Плагин "Функция-по-требованию"

## Введение

Этот плагин был мной написан с целью более удобного использования функций в CouchCMS. Обычно перед вызовом &lt;cms:call&gt; нужно вставить само тело функции в код. Это перегружает код визуально и к тому же требуется вставлять тело функции на каждой странице, где она вызывается.

С этим плагином система сама подключит тело функции, найдя и считав его из файла, когда произойдет вызов.

## Настройки

Открыть `config.php` (переименуем из `example.config.php`) –

### FOD_FUNCS_DIRECTORY

Эта настройка для задания родительской папки в которой будут искаться функции. Если функции лежат в данной теме в подпапке `/funcs-enabled/` укажем её используя стоковую CouchCMS константу K_THEME_DIR:

```php
define( 'FOD_FUNCS_DIRECTORY', K_THEME_DIR.'funcs-enabled/' );
```

Важно: После вызова функции код попытается найти её сначала в памяти (если она была уже зарегистрирована), потом поищет в списке файлов которые он уже просканировал ранее, и только после этого продолжит рекурсивно сканировать заданную папку с функциями, продолжив с последней остановки. Ищутся файлы в любых подпапках с расширением ".func". Главное, чтобы название файла совпадало с именем функции.

Для еще более быстрой работы можно посмотреть дополнительные настройки кеширования - см. [**Дополнительные настройки**](ЧИТАЙ-конфиг.md).

## Ссылки

* [**Midware Tags Reference » cms:func**](https://github.com/trendoman/Midware/tree/main/tags-reference/func.md)
* [**Midware Tags Reference » cms:call**](https://github.com/trendoman/Midware/tree/main/tags-reference/call.md)

## Автор

Пишите по любым вопросам

Антон С.\
tony.smirnov@gmail.com
