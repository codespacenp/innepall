# create-template-snippets

Если нужно, создаёт пустые файлы в папке со сниппетами для мастер-страницы.

```xml
<cms:call 'create-template-snippets' />
```

Например, для мастер-страницы **shop/index.php** следующие файлы для полей будут созданы при необходимости (в примере папка сниппетов сконфигурирована в /mysnippets/):

```txt
/mysnippets/shop-index-php/shop-index_form_config.inc
/mysnippets/shop-index-php/shop-index_list_config.inc
/mysnippets/shop-index-php/shop-index.fields
/mysnippets/shop-index-php/shop-index.globals
```

Вызов функции можно поместить в любое место, т.к. сработает она только для Супер-админа. По привычке закидываем в блок **cms:template**.

```xml
<?php require_once( '../couch/cms.php' ); ?>
<cms:template title="Shop Index" clonable='1'>
    <cms:call 'create-template-snippets' />
</cms:template>
<?php COUCH::invoke(); ?>
```

Дополнительно, будут созданы сниппеты для разных URL-путей отображения:

####  клонируемая мастер-страница "shop/index.php":

```txt
mysnippets/shop-index-php/list/shop-index-list.html
mysnippets/shop-index-php/page/shop-index-page.html
mysnippets/shop-index-php/archive/default.html
mysnippets/shop-index-php/folder/default.html
```

####  неклонируемая мастер-страница "settings.php":

```txt
mysnippets/settings-php/home/settings-default.html
```

####  мастер-страница "api.php" с индивидуальной настройкой путей:

> Запрошенный путь содержится в переменной `k_matched_route`

```txt
mysnippets/api-php/{k_matched_route}/route_{k_matched_route}.html
```

## Зависимости

Код использует тег `<cms:write>` и несколько переменных: `k__snippets_path`, `k__template_name_dashes`, `k__template_name_dashes_nophp`.

* **Ryazania Theme Variables » k__snippets_path**
* **Ryazania Theme Variables » k__template_name_dashes**
* **Ryazania Theme Variables » k__template_name_dashes_nophp**
* **Ryazania Theme Tags » write**

Переменные и тег уже входят в тему и включены по-умолчанию.

## В тему

* **Sapling » load-view** - функция-роутер для путей
* **Sapling » load-template-view** - альтернативная функция-роутер для путей

## Контакты

Антон С.\
tony.smirnov@gmail.com
