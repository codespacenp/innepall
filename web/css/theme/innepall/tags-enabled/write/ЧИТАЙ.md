# `<cms:write>`

Пишем в файлы (создаём их).

```xml
<cms:write file='greeting.html'>Hi Anton!</cms:write>
```

## Параметры

* **file** (необязательно) — абсолютный или относительный путь или ссылка ниже корня сайта;

    есть поддержка служебных слов - **@snippets**, **@uploads** - раскрываются в пути установленные в конфиге системы

* **truncate** — ***1*** or ***0*** (стандарт), обнуляем прошлое содержимое файла перед записью нового
* **add_newline** — ***1*** or ***0*** (стандарт), добавляем перенос строки в конце

## Примеры

```xml
<cms:write file='example.html'
  truncate='1'
  add_newline='0'
  ><h1>Title</h1>Example text
</cms:write>
```

```xml
<cms:write file='@snippets/test.inc' />
```

– второй пример создаёт ***test.inc*** внутри папки сниппетов CMS

## Usage

Данные переданные в содержимое тег-пары будет записано в файл. Файл всегда лежит относительно ниже корня сайта и создаётся при отсутствии.

```xml
<cms:write 'my.txt' >Hello world!</cms:write>
```

Если пропустить параметр **file**, тег назначит стандартное имя ***my_log.txt***.

```xml
<cms:write><cms:date /></cms:write>
```

Два ключевика помогают автоматически разместить файл в `uploads` или `snippets` папках: эти ключевики - **@snippets** и **@uploads**. Добавьте их перед названием файла как тут —

```xml
<cms:write "@uploads/file/download.zip">..</cms:write>
```

Если в конфиге системы вы уже указали `K_UPLOAD_DIR`, то это значение будет использовано, например `/myuploads/file/download.zip`. А если нет, то будет использован системный путь по умолчанию `/couch/uploads/file/download.zip` (*couch* тоже может быть переименован в кофиге системы). Такая же логика применяется к папке сниппетов.

Для переноса строк можно их добавлять к записываемым данным напрямую -

```xml
<cms:write 'my.txt' >
Hello world!
</cms:write>
```

или ставить параметр **add_newline** в ***1*** –

```xml
<cms:write 'my.txt' add_newline='1'>Hello world!</cms:write>
```

Если файл уже существует, тег дописывает данные к существующим. Если же нужно обнулить прошлый контент ставьте параметр **truncate** в ***1*** –

```xml
<cms:repeat '3'>
   <cms:write 'my.txt' add_newline='1' truncate='1'><cms:zebra 'a' 'b' 'c' /></cms:write>
</cms:repeat>
```


## Благодарим

Спасибо @KK, за начальный код
Спасибо @trendoman, за модификации (пути, ключевики)

## Вопросы

Anton S.\
tony.smirnov@gmail.com
