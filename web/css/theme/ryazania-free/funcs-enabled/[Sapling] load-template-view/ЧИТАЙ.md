# load-template-view

Роутер для стандартный видов путей CouchCMS.

```xml
<cms:call 'load-template-view' />
```

## Параметры

Параметры работают только для Супер-админа.

* debug – можно поставить ***1***, по умолчанию ***0***.

   ```xml
   <cms:call 'load-template-view' debug='1'/>
   ```

* URL-параметр ***?debug=1*** может включить дебаг если он не был указан.

   ```xml
   <cms:call 'load-template-view' />
   ```

## Пользуемся

Лучше всего использовать эту функцию в паре с функцией **create-template-snippets**, т.к. та создаст нужные папки и файлы.

Роутер загрузит отображения из папки сниппетов в зависимости от текущего запроса, напр.: папка, список, страница, архив.

Тег **[&lt;cms:smart_embed/&gt;](#теги)** это системный тег и он используется для работы по определению подходящего файла. Файл может иметь любое расширение, лишь бы название и путь к нему были подходящие (читай документацию к `<cms:smart_embed/>`!).

Ставим на страницу так:

```xml
<?php require_once( '../couch/cms.php' ); ?>
<cms:template title="Shop Index" clonable='1'>
    <cms:call 'create-template-snippets' />
</cms:template>
<cms:call 'load-template-view' />
<?php COUCH::invoke(); ?>
```

### Мастер-страница с настраиваемыми путями

В зависимости от значения пути которое распозналось из запроса, загрузим файл:

* `mysnippets/{masterpage-php}/{k_matched_route}/route_{k_matched_route}.html`

### Простая, неклонируемая мастер-страница

Наш роутер поищет файлы в следующей папке ***home*** в зависимости от имени мастер-страницы (напр. для index.php → `/index-php/home/`)

* `mysnippets/{masterpage-php}/home/`

### Клонируемые страницы

По текущему активному пути станет ясно какое отображение подбирать:

* `mysnippets/{masterpage-php}/list/`
* `mysnippets/{masterpage-php}/page/`
* `mysnippets/{masterpage-php}/archive/`
* `mysnippets/{masterpage-php}/folder/`

## Зависимости

Функция зависит от переменной: `k__template_name_dashes`, которая уже включена в теме по-умолчанию (находится в `/ryazania/vars-enabled/`).

* **Ryazania Theme variables » k__template_name_dashes**

## Теги

* **[Документация » smart_embed](https://docs.couchcms.com/miscellaneous/smart_embed.html)**


## Функции

* **Sapling » create-template-snippets** - создаёт все нужные файлы и папки для нашего роутера.

## Автор

Пишите по любым вопросам

Антон С.\
tony.smirnov@gmail.com
